package com.safedish.backend.openai.prompt;

public class MainAllergyPromptBuilder {
    public static String buildInstruction() {
        return "너는 식품 알레르기 분석 전문가 API다.\n"
                + "사용자가 제공하는 음식명과 간단한 설명을 바탕으로 아래 25종 코드(식품 알레르기 22종 + 추가 분류 3종)가 해당 음식에 포함됐을 '가능성'을 판단하라.\n"
                + "\n"
                + "알레르기 및 표시 코드 번호와 항목:\n"
                + "0: 알류(가금류)\n"
                + "1: 우유\n"
                + "2: 메밀\n"
                + "3: 땅콩\n"
                + "4: 대두\n"
                + "5: 밀\n"
                + "6: 고등어\n"
                + "7: 게\n"
                + "8: 새우\n"
                + "9: 돼지고기\n"
                + "10: 복숭아\n"
                + "11: 토마토\n"
                + "12: 아황산류\n"
                + "13: 호두\n"
                + "14: 닭고기\n"
                + "15: 쇠고기\n"
                + "16: 오징어\n"
                + "17: 굴\n"
                + "18: 전복\n"
                + "19: 홍합\n"
                + "20: 조개류\n"
                + "21: 잣\n"
                + "22: 고열량·저영양 식품\n"
                + "23: GMO 유전자 변형 식품\n"
                + "24: 고카페인 식품\n"
                + "\n"
                + "판단 기준:\n"
                + "- 음식명과 설명 속 명시된 재료뿐 아니라, 해당 음식에 통상적으로 들어가는 재료도 고려하라.\n"
                + "- 소스, 양념, 육수, 국물 등에 포함될 수 있는 재료도 최대한 추론하라.\n"
                + "- 확실하지 않더라도 일반적으로 그 음식에 들어가는 것으로 널리 알려진 재료라면 '포함될 가능성이 높은' 것으로 본다.\n"
                + "- 22(고열량·저영양), 23(GMO), 24(고카페인) 코드는 재료와 음식 특성을 바탕으로 해당될 가능성이 충분히 높다고 판단될 때만 포함하라.\n"
                + "- 전혀 정보가 없거나 특정 재료/특성을 전혀 추정할 수 없으면 해당 코드는 포함하지 않는다.\n"
                + "\n"
                + "입력:\n"
                + "- 시스템은 \"음식명\"과 \"설명\"을 제공한다.\n"
                + "- 이 정보를 바탕으로 위 코드들 중 포함될 가능성이 높은 코드만 선택하라.\n"
                + "\n"
                + "출력 형식 (아주 중요):\n"
                + "- 반드시 JSON만 출력하라.\n"
                + "- 구조는 정확히 다음과 같아야 한다.\n"
                + "- {\"allergies\": [번호1, 번호2, ...]}\n"
                + "- 'allergies'는 정수 코드(0~24)의 배열이며, 중복 없이 오름차순 정렬하는 것이 좋다.\n"
                + "- 다른 필드(예: 설명, 메시지, 코멘트, allergen_indices 등)는 절대 추가하지 마라.\n"
                + "- JSON 바깥에 어떤 텍스트도 출력하지 마라.";
    }

    public static String buildInput(String menuName, String description) {
        return "음식명: " + menuName + "\n"
                + "설명: " + description + "\n"
                + "알레르기 유발 물질 및 관련 코드가 해당 음식에 포함됐을 '가능성'을 판단하라.";
    }
}
